/*
**	$Id$
**	Generated by IDLTool 51.6
**	Do not edit
**
**	AutoInit stub for amigaguide
**
**	(C) Copyright 2003-2005 Amiga, Inc.
**	    All Rights Reserved
*/

#include <exec/types.h>
#include <exec/ports.h>
#include <dos/dos.h>
#include <libraries/amigaguide.h>
#include <utility/tagitem.h>
#include <utility/hooks.h>
#include <rexx/storage.h>

#include <interfaces/amigaguide.h>
#include <proto/exec.h>
#include <assert.h>

__attribute__((weak)) struct AmigaGuideIFace * IAmigaGuide = NULL;
/****************************************************************************/

extern struct Library * AmigaGuideBase;

void __init_amigaguide_main(void) __attribute__((constructor));
void __exit_amigaguide_main(void) __attribute__((destructor));

/****************************************************************************/

void __init_amigaguide_main(void)
{
    struct Library * LibBase;
    if (AmigaGuideBase == NULL) /* Library base is NULL, we need to open it */
    {
        LibBase = IExec->OpenLibrary("amigaguide.library", 0L);
        assert(LibBase != NULL);
    }
    else
    {
        LibBase = AmigaGuideBase;
    }

    IAmigaGuide = (struct AmigaGuideIFace *)IExec->GetInterface((struct Library *)LibBase, "main", 1, NULL);
    assert(IAmigaGuide != NULL);
}

/****************************************************************************/

void __exit_amigaguide_main(void)
{
    if (IAmigaGuide) IExec->DropInterface ((struct Interface *)IAmigaGuide);
}

/****************************************************************************/

